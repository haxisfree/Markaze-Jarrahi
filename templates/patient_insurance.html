{% extends 'base.html' %}
{% load static %}



{% block content %}
<div class="search-container">
    <form method="GET" action="{% url 'search' %}">
        {% csrf_token %}
        <div class="row">
            <div class="col-12">
                <input class="form-control py-2"
                type="search" placeholder="جستوجو نام بیمار ..." aria-label="Search"
                name="name search">
                <input class="form-control py-2"
                type="search" placeholder="جستوجو کدملی بیمار ..." aria-label="Search"
                name="national code search">
                <input class="form-control py-2"
                type="search" placeholder="جستوجو شماره پرونده بیمار ..." aria-label="Search"
                name="file number search">
            </div>
        </div>
        <div class="row">
            <div class="col-9">
                &nbsp;&nbsp;
                از تاریخ 
                <input type="date" class="form-control" id="publishDateMin" name="date_min">
                تا
                <input type="date" class="form-control" id="publishDateMax" name="date_max" data-jdp onclick="datePicker()">
            </div>
            <div class="col-3">
                <button id="search-button" class="btn btn-primary" type="submit">جستوجو</button>
            </div>
        </div>
    </form>
</div>

    {% for patient in querys %}
  
            <p><a href="{% url 'patient_info' patient.pk %}">{{ patient.first_name }} {{ patient.last_name }}</a></p>

    {% endfor %}




    <div class="flex">
        <div class="pagination">
            {% if querys.has_previous %}
                {% if 'x' in request.get_full_path %}
                    <a href="{{ request.get_full_path }}&screen={{ querys.previous_page_number }}">&laquo;</a>
                {% else %}
                    <a href="?screen={{ querys.previous_page_number }}">&laquo;</a>
                {% endif %}
            {% else %}
                <a class="disabled" href="#" tabindex="-1" aria-disabled="True">&laquo;</a>
            {% endif %}
      
          {% if querys.number|add:'-4' > 1 %}

            {% if 'x' in request.get_full_path %}
                <a href="{{ request.get_full_path }}&screen={{ querys.number|add:'-5' }}">&hellip;</a>
            {% else %}
                <a class="page-link" href="?screen={{ querys.number|add:'-5' }}">&hellip;</a>
            {% endif %}


            
          {% endif %}
      
          {% for i in querys.paginator.page_range %}
              {% if querys.number == i %}
                      <a class="active">{{ i }}</a>
              {% elif i > querys.number|add:'-5' and i < querys.number|add:'5' %}


                {% if 'x' in request.get_full_path %}
                    <a href="{{ request.get_full_path }}&screen={{  i  }}">{{ i }}</a>
                {% else %}
                    <a class="page-link" href="?screen={{ i }}">{{ i }}</a>
                {% endif %}




              {% endif %}
          {% endfor %}
      
          {% if querys.paginator.num_pages > querys.number|add:'4' %}
          

            {% if 'x' in request.get_full_path %}
                <a href="{{ request.get_full_path }}&screen={{  querys.number|add:'5'  }}">&hellip;</a>
            {% else %}
                <a class="page-link" href="?screen={{ querys.number|add:'5' }}">&hellip;</a>
            {% endif %}



          {% endif %}
      







          {% if querys.has_next %}


            {% if 'x' in request.get_full_path %}
                <a href="{{ request.get_full_path }}&screen={{  querys.next_page_number  }}">&raquo;</a>
            {% else %}
                <a class="page-link" href="?screen={{ querys.next_page_number }}">&raquo;</a>
            {% endif %}



          {% else %}
              <a class="disabled" href="#" tabindex="-1" aria-disabled="True">&raquo;</a>
          {% endif %}
        </div> 
      </div>

{% endblock content %}

